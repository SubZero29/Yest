public class Joystick : MonoBehaviour, IInputProvider, IBeginDragHandler, IDragHandler, IEndDragHandler, IPointerDownHandler, IPointerUpHandler
    {

        public RectTransform Background;
        public RectTransform Knob;
        [field: SerializeField] public float Horizontal { get; set; } = 0;

        [field: SerializeField] public float Vertical { get; set; } = 0;


        Vector2 PointPosition;

        public void OnBeginDrag(PointerEventData eventData)
        {

        }

        public void OnDrag(PointerEventData eventData)
        {

            PointPosition = new Vector2((eventData.position.x - Background.position.x) / ((Background.rect.size.x - Knob.rect.size.x) / 2), (eventData.position.y - Background.position.y) / ((Background.rect.size.y - Knob.rect.size.y) / 2));

            PointPosition = (PointPosition.magnitude > 1.0f) ? PointPosition.normalized : PointPosition;
            var x = PointPosition.x * ((Background.rect.size.x - Knob.rect.size.x) / 2) + Background.position.x;
            var y = PointPosition.y * ((Background.rect.size.y - Knob.rect.size.y) / 2) + Background.position.y;
            Knob.transform.position = new Vector2(x, y);


        }

        public void OnEndDrag(PointerEventData eventData)
        {
            PointPosition = new Vector2(0f, 0f);
            Knob.transform.position = Background.position;
        }
        public void OnPointerDown(PointerEventData eventData)
        {
            Background.position = eventData.position;

        }

        public void OnPointerUp(PointerEventData eventData)
        {
            OnEndDrag(eventData);
        }


        // Update is called once per frame
        void Update()
        {
            Horizontal = PointPosition.x;
            Vertical = PointPosition.y;
        }

        public Vector2 Coordinate()
        {
            return new Vector2(Horizontal, Vertical);
        }
    }
